<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Send Money Form</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- Link your stylesheet here -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="tab-container">
      <div class="tab">
        <button class="tablinks" onclick="openTab(event, 'recipientTab')">
          منصة سوا
        </button>
        <button class="tablinks" onclick="openTab(event, 'amountTab')">
          سند صرف
        </button>
        <button class="tablinks" onclick="openTab(event, 'confirmTab')">
          اعتماد جديد
        </button>
      </div>

      <div id="recipientTab" class="tabcontent">
        <h2>Select Recipient</h2>

        <form action="process_payment.php" method="post">
          <label for="recipient">Recipient:</label>
          <select name="recipient" id="recipient">
            <option value="recipient1">Recipient 1</option>
            <option value="recipient2">Recipient 2</option>
            <option value="recipient3">Recipient 3</option>
            <!-- Add more options as needed -->
          </select>
          <input type="text" id="searchInput" placeholder="Search..." />
          <ul id="autocompleteResults" class="autocomplete-results"></ul>
          <br />

          <label for="amount">Amount:</label>
          <input type="number" name="amount" id="amount" step="0.01" required />
          <br />

          <label for="currency">Currency:</label>
          <select name="currency" id="currency">
            <option value="usd">USD</option>
            <option value="eur">EUR</option>
            <option value="gbp">GBP</option>
            <!-- Add more currency options as needed -->
          </select>
          <br />

          <label for="message">Message:</label>
          <textarea name="message" id="message" rows="4" cols="50"></textarea>
          <br />

          <input type="submit" value="Send Money" />
        </form>
      </div>

      <div id="amountTab" class="tabcontent">
        <div id="popup">
          <h2>سند صرف</h2>
          <div class="amount-tap-container">
            <div class="amount-tap-content mb-20">
              <h1 class="d-inline">MG</h1>
              <h4 class="text-gray mb-20 d-inline mr-100" id="copyTextBillNo">
                9999999
              </h4>
              <hr class="mb-20" />
              <p class="text-gray mb-20">رقم الاشعار</p>
              <h3 class="text-blue" id="copyTextSourceNo">5555555555555555</h3>
            </div>
          </div>
          <div class="amount-tap-buttons">
            <button class="print-btn" id="printButton">طباعة الـأسعار</button>
            <button class="copy-btn" id="copyButton">نسخ المعلومات</button>
            <button class="download-btn" id="downloadBtn">تحميل كـ صورة</button>
          </div>
        </div>
      </div>

      <div id="confirmTab" class="tabcontent">
        <h2>Confirm Details</h2>
        <form action="process_payment.php" method="post">
          <!-- Display selected recipient and amount for confirmation -->
          <p>Recipient: <span id="confirmRecipient"></span></p>
          <p>Amount: <span id="confirmAmount"></span></p>

          <!-- Additional fields for confirmation -->
          <label for="message">Message:</label>
          <textarea name="message" id="message" rows="4" cols="50"></textarea>
          <br />

          <input type="submit" value="Send Money" />
        </form>
      </div>
    </div>

    <script>
      // active tab start
      document.getElementById("recipientTab").style.display = "block";
      function openTab(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
      }
      // active tab end

      // quick search start
      function searchRecipients() {
        var input, filter, select, options, i, txtValue;
        input = document.getElementById("recipientSearch");
        filter = input.value.toUpperCase();
        select = document.getElementById("recipientSelect");
        options = select.getElementsByTagName("option");
        for (i = 0; i < options.length; i++) {
          txtValue = options[i].textContent || options[i].innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            options[i].style.display = "";
          } else {
            options[i].style.display = "none";
          }
        }
      }

      const searchInput = document.getElementById("searchInput");
      const autocompleteResults = document.getElementById(
        "autocompleteResults"
      );

      const data = [
        {
          id: 1,
          name: "John Doe",
          age: 28,
          email: "john@example.com",
        },
        {
          id: 2,
          name: "Jane Smith",
          age: 24,
          email: "jane@example.com",
        },
        {
          id: 3,
          name: "Michael Johnson",
          age: 32,
          email: "michael@example.com",
        },
        {
          id: 4,
          name: "Emily Brown",
          age: 29,
          email: "emily@example.com",
        },
      ];

      searchInput.addEventListener("input", function () {
        const searchTerm = searchInput.value.toLowerCase();
        const names = data.map((person) => person.name);
        const filteredCountries = names.filter((name) =>
          name.toLowerCase().includes(searchTerm)
        );

        displayAutocompleteResults(filteredCountries);
      });

      function displayAutocompleteResults(results) {
        autocompleteResults.innerHTML = "";

        results.forEach((result) => {
          const li = document.createElement("li");
          li.textContent = result;
          li.addEventListener("click", function () {
            searchInput.value = result;
            autocompleteResults.innerHTML = "";
          });
          autocompleteResults.appendChild(li);
        });
      }
      // quick search end

      // copy start
      const copyButton = document.getElementById("copyButton");
      const copyText = document.getElementById("copyTextSourceNo");
      const copyText1 = document.getElementById("copyTextBillNo");

      copyButton.addEventListener("click", () => {
        // Create a temporary textarea to hold the text
        const textarea = document.createElement("textarea");
        textarea.value = copyText.textContent + copyText1.textContent;
        document.body.appendChild(textarea);

        // Select the text in the textarea
        textarea.select();
        document.execCommand("copy");

        // Clean up
        document.body.removeChild(textarea);

        // Update the button text
        copyButton.textContent = "تم النسخ!";
      });
      // copy end

      // print start
      const printButton = document.getElementById("printButton");
      printButton.addEventListener("click", () => {
        window.print();
      });
      // print end

      // save image start
      document
        .getElementById("downloadBtn")
        .addEventListener("click", function () {
          var popup = document.getElementById("popup");
          html2canvas(popup).then(function (canvas) {
            var link = document.createElement("a");
            link.href = canvas.toDataURL("image/png");
            link.download = "bill_info.png";
            link.click();
          });
        });
      // save image end
    </script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  </body>
</html>
